### Домашнее задание к занятию "4.3. Языки разметки JSON и YAML"

>1. Мы выгрузили JSON, который получили через API запрос к нашему сервису:
>	```json
>   { "info" : "Sample JSON output from our service\t",
>        "elements" :[
>            { "name" : "first",
>            "type" : "server",
>            "ip" : 7175 
>            },
>            { "name" : "second",
>            "type" : "proxy",
>            "ip : 71.78.22.43
>            }
>        ]
>    }
>	```
>  Нужно найти и исправить все ошибки, которые допускает наш сервис

```json
   { "info" : "Sample JSON output from our service\t",
        "elements" :[
            { "name" : "first",
            "type" : "server",
            "ip" : 7175    # здесь указан не IP, а скорее порт
            },
            { "name" : "second",
            "type" : "proxy",
            "ip" : "71.78.22.43" # у ip не хватало закрвающих кавычек, а сам адрес тоже должен быть в кавычках
            }
        ]
    }
```


>2. В прошлый рабочий день мы создавали скрипт, позволяющий опрашивать веб-сервисы и получать их IP. К уже реализованному функционалу нам нужно добавить возможность записи JSON и YAML файлов, описывающих наши сервисы. Формат записи JSON по одному сервису: { "имя сервиса" : "его IP"}. Формат записи YAML по одному сервису: - имя сервиса: его IP. Если в момент исполнения скрипта меняется IP у сервиса - он должен так же поменяться в yml и json файле.

Добавил в код из прошлого задания по python преобразование в JSON и YAML.
Получилось, что мы просто читаем текстовый файл еще раз и форматируем его в 
файлы JSON и YAML. Думал, как можно сделать по-другому, но ничего не получилось.
Такой вариант рабочий?

```python
#!/usr/bin/env python3

import socket, json, yaml

f = open('srv_ip.txt', 'r')
srv_list = [l.strip() for l in f]
srv_dict = dict(i.split(' - ') for i in srv_list)
f = open('srv_ip.txt', 'w')

for key, value in srv_dict.items():
    ip = socket.gethostbyname(key)
    if ip != value:
        print('ERROR ', key, ' IP mismatch: ', value, ' ', ip)
        f.write(key + ' - ' + ip + '\n')
    else:
        print(key, ' - ', value)
        f.write(key + ' - ' + value + '\n')

f.close()

f = open('srv_ip.txt', 'r')
srv_list = [l.strip() for l in f]
srv_dict = dict(i.split(' - ') for i in srv_list)

with open('srv_ip.json', 'w') as tmp:
     tmp.write(json.dumps(srv_dict, indent=2))

with open('srv_ip.yml', 'w') as tmp:
     tmp.write(yaml.dump(srv_dict))
```