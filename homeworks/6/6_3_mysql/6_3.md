### Домашнее задание к занятию "6.3. MySQL"

>#### Введение
>
>Перед выполнением задания вы можете ознакомиться с 
>[дополнительными материалами](https://github.com/netology-code/virt-homeworks/tree/master/additional/README.md).
>
>#### Задача 1
> 
>Используя docker поднимите инстанс MySQL (версию 8). Данные БД сохраните в volume.
>
>Изучите [бэкап БД](https://github.com/netology-code/virt-homeworks/tree/master/06-db-03-mysql/test_data) и 
>восстановитесь из него.
>
>Перейдите в управляющую консоль `mysql` внутри контейнера.
>
>Используя команду `\h` получите список управляющих команд.
>
>Найдите команду для выдачи статуса БД и **приведите в ответе** из ее вывода версию сервера БД.

```commandline
mysql> \s
...
Server version:         8.0.26 MySQL Community Server - GPL
...
```

>Подключитесь к восстановленной БД и получите список таблиц из этой БД.
>
>**Приведите в ответе** количество записей с `price` > 300.

![img.png](img.png)

>#### Задача 2
>
>Создайте пользователя test в БД c паролем test-pass, используя:
>- плагин авторизации mysql_native_password
>- срок истечения пароля - 180 дней 
>- количество попыток авторизации - 3 
>- максимальное количество запросов в час - 100
>- аттрибуты пользователя:
>    - Фамилия "Pretty"
>    - Имя "James"
>
>Предоставьте привелегии пользователю `test` на операции SELECT базы `test_db`.

![img_1.png](img_1.png)
    
>Используя таблицу INFORMATION_SCHEMA.USER_ATTRIBUTES получите данные по пользователю `test` и 
>**приведите в ответе к задаче**.

![img_2.png](img_2.png)

>#### Задача 3
>
>Установите профилирование `SET profiling = 1`.
>Изучите вывод профилирования команд `SHOW PROFILES;`.
>
>Исследуйте, какой `engine` используется в таблице БД `test_db` и **приведите в ответе**.

![img_3.png](img_3.png)

>Измените `engine` и **приведите время выполнения и запрос на изменения из профайлера в ответе**:
>- на `MyISAM`
>- на `InnoDB`

```text
...
 14 | 0.01871925 | ALTER TABLE orders ENGINE = MyISAM
...
```
```text
...
 16 | 0.02387400 | ALTER TABLE orders ENGINE = InnoDB
...
```

>#### Задача 4 
>
>Изучите файл `my.cnf` в директории /etc/mysql.
>
>Измените его согласно ТЗ (движок InnoDB):
>- Скорость IO важнее сохранности данных
>- Нужна компрессия таблиц для экономии места на диске
>- Размер буффера с незакомиченными транзакциями 1 Мб
>- Буффер кеширования 30% от ОЗУ
>- Размер файла логов операций 100 Мб
>
>Приведите в ответе измененный файл `my.cnf`.

my.cnf:
```text
...
innodb_flush_method = O_DSYNC??

innodb_flush_log_at_trx_commit = 0
innodb_log_buffer_size = 1MB
innodb_buffer_pool_size = 1GB
max_binlog_size = 100M
...
```
Для сжатия таблиц InnoDB необходимо установить следующие параметры в файле my.cnf:
```text
innodb_file_per_table = 1 (включен по умолчанию)
innodb_file_format = Barracuda
```
Далее выполнить запрос
```commandline
ALTER TABLE orders ROW_FORMAT=COMPRESSED;
```